# Java Celeste - 横版跳跃游戏

一个使用Java Swing开发的简单横版跳跃游戏，灵感来源于经典游戏Celeste。

## 游戏特性

- 🎮 流畅的横版移动和跳跃
- 🌍 简单的物理系统（重力和碰撞检测）
- 🏗️ 多个平台供玩家跳跃
- 🎨 简洁的像素风格图形
- ⌨️ 键盘控制
- 🛠️ **独立地图编辑器** - 可视化创建和编辑地图

## 控制方式

- **左移**: A 键 或 左箭头键
- **右移**: D 键 或 右箭头键
- **上移**: W 键 或 上箭头键 (预留功能)
- **下移**: S 键 或 下箭头键 (预留功能)
- **跳跃**: K 键 或 空格键 或 J 键

> 💡 **自定义按键**: 可以修改 `src/KeyBindings.java` 文件来自定义按键绑定，详见 [KEYBINDINGS.md](KEYBINDINGS.md)

## 快速开始

### 使用启动脚本（推荐）

```bash
# Windows 用户
cmd.txt

# Linux/Mac 用户
./start.sh
```

### 使用Maven命令

```bash
# 编译项目
mvn compile

# 运行游戏
mvn exec:java@run-game

# 运行地图编辑器
mvn exec:java@run-editor
```

### 直接运行Java文件

```bash
# 编译
javac -d target/classes src/*.java

# 运行游戏
java -cp target/classes Game

# 运行地图编辑器
java -cp target/classes MapEditor
```

## 地图编辑器详细使用指南

### 概述

Java Celeste 地图编辑器是一个独立的可视化地图编辑工具，用于创建和编辑游戏地图。它与游戏主程序相对独立，提供直观的图形界面来设计游戏关卡。

### 功能特性

#### 核心功能
- **可视化编辑**: 直观的图形界面，支持拖拽创建地图元素
- **多种元素类型**: 支持平台、实心物块、尖刺等游戏元素
- **实时预览**: 编辑过程中实时显示地图效果
- **地图管理**: 支持新建、加载、保存地图文件
- **元素管理**: 支持选择、移动、删除、复制地图元素

#### 编辑模式
1. **平台模式**: 创建可跳跃的平台
2. **实心物块模式**: 创建实心障碍物
3. **尖刺模式**: 创建危险尖刺
4. **选择模式**: 选择和编辑现有元素
5. **删除模式**: 删除地图元素

### 地图编辑器使用方法

#### 启动地图编辑器

##### 方法1: 使用启动脚本
```bash
# Windows
cmd.txt

# Linux/Mac
./start.sh
```

##### 方法2: 直接使用Maven
```bash
mvn exec:java@run-editor
```

##### 方法3: 直接运行Java类
```bash
mvn compile
java -cp target/classes MapEditor
```

#### 基本操作

##### 创建地图元素
1. 选择相应的编辑模式（平台/实心物块/尖刺）
2. 在画布上点击并拖拽创建元素
3. 尖刺元素只需点击即可创建

##### 编辑地图元素
1. 切换到选择模式
2. 点击要编辑的元素
3. 拖拽移动元素位置
4. 使用右侧面板查看和编辑元素属性

##### 删除地图元素
1. 切换到删除模式
2. 点击要删除的元素
3. 或使用选择模式选中元素后点击"删除选中"按钮

##### 文件操作
- **新建地图**: Ctrl+N 或点击"新建"按钮
- **加载地图**: Ctrl+O 或点击"加载"按钮
- **保存地图**: Ctrl+S 或点击"保存"按钮
- **测试地图**: Ctrl+T 或点击"测试地图"按钮

### 快捷键

| 快捷键 | 功能 |
|--------|------|
| 1 | 切换到平台模式 |
| 2 | 切换到实心物块模式 |
| 3 | 切换到尖刺模式 |
| 4 | 切换到选择模式 |
| 5 | 切换到删除模式 |
| Ctrl+N | 新建地图 |
| Ctrl+O | 加载地图 |
| Ctrl+S | 保存地图 |
| Ctrl+T | 测试地图 |

### 界面说明

#### 主界面布局
- **顶部工具栏**: 编辑模式选择和文件操作按钮
- **左侧画布**: 地图编辑区域，显示网格和地图元素
- **右侧面板**: 地图信息和元素列表
- **底部状态栏**: 显示当前模式和地图统计信息

#### 画布功能
- **网格显示**: 帮助精确放置元素
- **元素高亮**: 选中的元素会显示黄色边框
- **模式提示**: 显示当前编辑模式的说明文字

#### 元素列表
- 显示所有地图元素的详细信息
- 支持点击选择元素
- 提供删除和复制功能

### 地图文件格式

地图编辑器使用JSON格式保存地图文件，与游戏完全兼容：

```json
{
  "name": "地图名称",
  "description": "地图描述",
  "platforms": [
    {"x": 200, "y": 950, "width": 100, "height": 20, "comment": "起始平台"}
  ],
  "solidBlocks": [
    {"x": 400, "y": 900, "width": 30, "height": 150, "comment": "地面障碍"}
  ],
  "spikes": [
    {"x": 420, "y": 1020, "width": 15, "height": 30, "comment": "地面尖刺"}
  ]
}
```

### 工作流程建议

1. **规划地图**: 先确定地图的整体布局和难度
2. **创建基础结构**: 放置主要平台和路径
3. **添加障碍物**: 放置实心物块增加挑战
4. **设置危险元素**: 添加尖刺等危险元素
5. **测试和调整**: 使用测试功能验证地图可玩性
6. **保存地图**: 保存为JSON文件供游戏使用

### 技术特性

- **独立运行**: 地图编辑器与游戏主程序完全独立
- **实时渲染**: 使用Java Swing进行实时图形渲染
- **文件兼容**: 完全兼容游戏的地图文件格式
- **跨平台**: 支持Windows、Linux、Mac等操作系统

### 故障排除

#### 常见问题

1. **无法启动编辑器**
   - 确保Java 11或更高版本已安装
   - 检查Maven依赖是否正确安装

2. **地图文件无法加载**
   - 检查JSON文件格式是否正确
   - 确保文件路径正确

3. **元素无法选择**
   - 确保处于选择模式
   - 检查元素是否被其他元素遮挡

4. **保存失败**
   - 检查文件写入权限
   - 确保目标目录存在

#### 性能优化

- 大型地图可能影响编辑器性能
- 建议定期保存工作进度
- 复杂地图可以分段创建

### 开发信息

- **开发语言**: Java 11
- **图形库**: Java Swing
- **构建工具**: Maven
- **依赖管理**: Jackson JSON处理库

### 更新日志

#### v1.0.0
- 初始版本发布
- 支持基本的可视化地图编辑
- 实现地图保存和加载功能
- 提供完整的用户界面

## 地图编辑器快速使用

### 基本操作
1. **选择编辑模式**：点击工具栏按钮或使用数字键1-5
   - 1：平台模式
   - 2：实心物块模式  
   - 3：尖刺模式
   - 4：选择模式
   - 5：删除模式

2. **创建元素**：
   - 平台/实心物块：点击并拖拽创建矩形
   - 尖刺：直接点击创建

3. **编辑元素**：
   - 切换到选择模式
   - 点击选中元素
   - 拖拽移动位置

4. **文件操作**：
   - Ctrl+N：新建地图
   - Ctrl+O：打开地图
   - Ctrl+S：保存地图
   - Ctrl+T：测试地图

### 界面说明
- **左侧**：地图编辑画布
- **右侧**：地图信息和元素列表
- **顶部**：工具栏和菜单
- **底部**：状态栏

## 游戏操作

### 按键控制
- A/D 或 ←/→：左右移动
- W 或 ↑ 或 空格：跳跃
- S 或 ↓：下蹲（未实现）
- R：重生

## 项目结构

```
java-celeste/
├── pom.xml                    # Maven配置文件
├── README.md                  # 项目说明
├── QUICK_START.md             # 快速开始指南
├── MAP_EDITOR_README.md       # 地图编辑器详细文档
├── start.bat                  # Windows启动脚本
├── start.sh                   # Linux/Mac启动脚本
├── maps/                      # 地图文件目录
│   ├── default.json          # 默认地图
│   ├── simple.json           # 简单地图
│   └── hard.json             # 困难地图
└── src/
    ├── Game.java             # 游戏主类
    ├── MapEditor.java        # 地图编辑器主类
    ├── Player.java           # 玩家角色类
    ├── Platform.java         # 平台类
    ├── SolidBlock.java       # 实心物块类
    ├── Spike.java            # 尖刺类
    ├── MapElement.java       # 地图元素基类
    ├── MapDesign.java        # 地图设计管理类
    ├── JsonMapLoader.java    # JSON地图加载器
    └── KeyBindings.java      # 按键绑定配置类
```

## 游戏目标

- 使用跳跃技能到达不同的平台
- 探索游戏世界
- 享受简单的横版跳跃乐趣！

## 技术实现

- **Java Swing**: 用于图形界面和游戏渲染
- **Maven**: 项目构建和依赖管理
- **多线程**: 游戏循环与UI更新分离
- **事件驱动**: 键盘输入处理

## 系统要求

- Java 11 或更高版本
- Maven 3.6 或更高版本（如果使用Maven运行）

---

享受游戏吧！🎮

